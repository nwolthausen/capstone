---
title: "Capstone -- NDD"
author: "Noah Wolthausen"
date: "2/10/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r }
library(dplyr)
library(plyr)
library(readxl)
library(tidyr)

ndd <- read_excel("/Users/noahwolthausen/Desktop/Capstone/NDD.Master.xlsx")

#Need to gather all variables

#combine all drink variables

ndd$drink_cat <- ifelse(ndd$drink_bottled == 1,1,
                (ifelse(ndd$drink_public == 1,2, 
                (ifelse(ndd$drink_spring == 1,3,
                (ifelse(ndd$drink_tab == 1,4,
                (ifelse(ndd$drink_tanker == 1,5, 
                (ifelse(ndd$drink_well == 1,6, 
                (ifelse(ndd$drink_other == 1,7, NA)))))))))))))


ndd$drink_cat <- factor(ndd$drink_cat, levels = c(1:7), 
                                      labels = c("Bottled","Public pump","Spring",
                                              "Tap","Tanker","Well","Other"))


table(ndd$drink_cat)

#combine all wash
ndd$wash_cat <- ifelse(ndd$wash_bottled == 1,1,
                (ifelse(ndd$wash_publis == 1,2, 
                (ifelse(ndd$wash_spring == 1,3,
                (ifelse(ndd$wash_tab == 1,4,
                (ifelse(ndd$wash_well == 1,5, 
                (ifelse(ndd$wash_tanker == 1,6, 
                (ifelse(ndd$wash_other == 1,7, NA)))))))))))))

ndd$wash_cat <- factor(ndd$wash_cat, levels = c(1:7), 
                       labels = c("Bottled","Public pump","Spring",
                                              "Tap","Tanker","Well","Other"))

#factor and label toilet type
ndd$toilet_type <- factor(ndd$toilet_type, levels = c(1:9), 
                              labels = c("Automatic toilet",
                                         "Ventilated improved pit latrine",
                                         "Pit latrine with slab",
                                         "Pit latrine without slabs",
                                         "Composting toilet","Bucket toilet",
                                         "Hanging toilet","Bush","River/stream"))


#making micronutrient groups

ndd$micro_zinc <- ifelse(ndd$fish >= 1,1,
                  ifelse(ndd$milk >= 1,1,
                  ifelse(ndd$yogurt >= 1,1,
                  ifelse(ndd$flesh_meat >= 1,1,
                  ifelse(ndd$beans >= 1,1,
                  ifelse(ndd$pumpkins >= 1,1,
                  ifelse(ndd$zinc == 1,1,0)))))))

table(ndd$micro_zinc)

ndd$micro_iron <- ifelse(ndd$beans >= 1,1,
                  ifelse(ndd$darkgreen_vegetables >= 1,1,
                  ifelse(ndd$tomato >= 1,1,
                  ifelse(ndd$flesh_meat >= 1,1,
                  ifelse(ndd$potatoes >= 1,1,
                  ifelse(ndd$eggs >= 1,1,
                  ifelse(ndd$iron == 1,1,
                  ifelse(ndd$chicken...89 >= 1,1,0))))))))
table(ndd$micro_iron)

ndd$micro_vitamind <- ifelse(ndd$milk >= 1,1,
                      ifelse(ndd$fish >= 1,1,
                      ifelse(ndd$eggs >= 1,1,
                      ifelse(ndd$chicken...89 >= 1,1,0))))
table(ndd$micro_vitamind)

ndd$micro_vitamina <- ifelse(ndd$darkgreen_vegetables >= 1,1,
                      ifelse(ndd$pumpkins >= 1,1,
                      ifelse(ndd$mango >= 1,1,
                      ifelse(ndd$milk >= 1,1,
                      ifelse(ndd$chicken...89 >= 1,1,
                      ifelse(ndd$beans >= 1,1,
                      ifelse(ndd$tomato >= 1,1,
                      ifelse(ndd$fish >= 1,1,
                      ifelse(ndd$eggs >= 1,1,0)))))))))
table(ndd$micro_vitamina)


```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
